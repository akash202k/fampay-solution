apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: bran-ingress
  namespace: fampay-bran
  annotations:
      # Load Balancer Name
    alb.ingress.kubernetes.io/load-balancer-name: fampay-alb
      #grouping
    alb.ingress.kubernetes.io/group.name: fampay
      # Ingress Core Settings
    kubernetes.io/ingress.class: "alb" #(OLD INGRESS CLASS NOTATION - STILL WORKS BUT RECOMMENDED TO USE IngressClass Resource)
    alb.ingress.kubernetes.io/scheme: internet-facing
      # Health Check Settings
    alb.ingress.kubernetes.io/healthcheck-protocol: HTTP 
    alb.ingress.kubernetes.io/healthcheck-port: '8000'
    alb.ingress.kubernetes.io/target-type: 'ip'
    alb.ingress.kubernetes.io/healthcheck-path: '/fampay-bran/metrics'
    alb.ingress.kubernetes.io/healthcheck-interval-seconds: '15'
    alb.ingress.kubernetes.io/healthcheck-timeout-seconds: '5'
    alb.ingress.kubernetes.io/success-codes: '200'
    alb.ingress.kubernetes.io/healthy-threshold-count: '2'
    alb.ingress.kubernetes.io/unhealthy-threshold-count: '2' 
    alb.ingress.kubernetes.io/listen-ports: '[{"HTTPS":443}, {"HTTP":80}]'
    alb.ingress.kubernetes.io/certificate-arn: 'arn:aws:acm:us-east-1:982534355700:certificate/f744adec-d79a-4af8-9476-c507f5a7fe9f'
    alb.ingress.kubernetes.io/ssl-redirect: '443' 
    # nginx.ingress.kubernetes.io/rewrite-target: /$2
spec:
  rules:
    # - host: dayxcode.com
    - http:
        paths:
          - path: /bran
            pathType: Prefix
            backend:
              service:
                name: bran  # Direct reference in same namespace
                port:
                  number: 8000